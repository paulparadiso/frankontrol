(this.webpackJsonpinterface=this.webpackJsonpinterface||[]).push([[0],{102:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),o=n(15),r=n.n(o),s=(n(69),n(30)),i=n(14),u=(n(70),n(6)),d=n(126),l=n(136),b=n(125),j=(n(71),n(123)),O={admin:["admin","all","tower","rotunda"],tower:["tower"],rotunda:["rotunda"],security:["all"]},m=n(2),f=Object(j.a)({root:{minWidth:325,margin:10,textAlign:"center"},buttonContainer:{width:"57vw",textAlign:"right"},left:{width:"45%",float:"left"},buttons:{margin:10},right:{width:"45%",float:"right"}}),h=function(t){var e,n,a,o,r,s,i,j,h,g,x=f(),S=O[t.user]||[];return Object(m.jsx)(l.a,{variant:"outlined",className:x.root,children:Object(m.jsx)(b.a,{children:Object(m.jsxs)("div",{className:x.buttonContainer,children:[S.includes("tower")?Object(m.jsx)(c.a.Fragment,{children:Object(m.jsxs)("div",{children:["Tower",Object(m.jsx)(d.a,(e={className:"button",variant:"contained",color:"primary"},Object(u.a)(e,"className",x.buttons),Object(u.a)(e,"onClick",(function(){return t.sendState({topic:"towerState",params:{state:"on"}})})),Object(u.a)(e,"children","ON"),e)),Object(m.jsx)(d.a,(n={className:"button",color:"secondary",variant:"contained"},Object(u.a)(n,"className",x.buttons),Object(u.a)(n,"onClick",(function(){return t.sendState({topic:"towerState",params:{state:"off"}})})),Object(u.a)(n,"children","OFF"),n))]})}):Object(m.jsx)("div",{}),S.includes("rotunda")?Object(m.jsx)(c.a.Fragment,{children:Object(m.jsxs)("div",{children:["Rotunda",Object(m.jsx)(d.a,(a={className:"button",variant:"contained",color:"primary"},Object(u.a)(a,"className",x.buttons),Object(u.a)(a,"onClick",(function(){return t.sendState({topic:"rotundaState",params:{state:"on"}})})),Object(u.a)(a,"children","ON"),a)),Object(m.jsx)(d.a,(o={className:"button",color:"secondary",variant:"contained"},Object(u.a)(o,"className",x.buttons),Object(u.a)(o,"onClick",(function(){return t.sendState({topic:"rotundaState",params:{state:"off"}})})),Object(u.a)(o,"children","OFF"),o))]})}):Object(m.jsx)("div",{}),S.includes("tower")?Object(m.jsx)(c.a.Fragment,{children:Object(m.jsxs)("div",{children:["Tower Audio",Object(m.jsx)(d.a,(r={className:"button",color:"primary",variant:"contained"},Object(u.a)(r,"className",x.buttons),Object(u.a)(r,"onClick",(function(){return t.sendState({topic:"towerAudioState",params:{state:"off"}})})),Object(u.a)(r,"children","ON"),r)),Object(m.jsx)(d.a,(s={className:"button",color:"secondary",variant:"contained"},Object(u.a)(s,"className",x.buttons),Object(u.a)(s,"onClick",(function(){return t.sendState({topic:"towerAudioState",params:{state:"on"}})})),Object(u.a)(s,"children","OFF"),s))]})}):Object(m.jsx)("div",{}),S.includes("rotunda")?Object(m.jsx)(c.a.Fragment,{children:Object(m.jsxs)("div",{children:["Rotunda Audio",Object(m.jsx)(d.a,(i={className:"button",color:"primary",variant:"contained"},Object(u.a)(i,"className",x.buttons),Object(u.a)(i,"onClick",(function(){return t.sendState({topic:"rotundaAudioState",params:{state:"off"}})})),Object(u.a)(i,"children","ON"),i)),Object(m.jsx)(d.a,(j={className:"button",color:"secondary",variant:"contained"},Object(u.a)(j,"className",x.buttons),Object(u.a)(j,"onClick",(function(){return t.sendState({topic:"rotundaAudioState",params:{state:"on"}})})),Object(u.a)(j,"children","OFF"),j))]})}):Object(m.jsx)("div",{}),S.includes("all")?Object(m.jsx)(c.a.Fragment,{children:Object(m.jsxs)("div",{children:["Audio",Object(m.jsx)(d.a,(h={className:"button",color:"primary",variant:"contained"},Object(u.a)(h,"className",x.buttons),Object(u.a)(h,"onClick",(function(){return t.sendState({topic:"audioState",params:{state:"off"}})})),Object(u.a)(h,"children","ON"),h)),Object(m.jsx)(d.a,(g={className:"button",color:"secondary",variant:"contained"},Object(u.a)(g,"className",x.buttons),Object(u.a)(g,"onClick",(function(){return t.sendState({topic:"audioState",params:{state:"on"}})})),Object(u.a)(g,"children","OFF"),g))]})}):Object(m.jsx)("div",{})]})})})},g=n(127),x=n(137),S=n(133),p=n(128),v=n(138),w=n(134),N=n(129),C=Object(j.a)({root:{minWidth:325,margin:10,textAlign:"center"},header:{width:"100%",marginBottom:20},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.0)"},buttons:{margin:10},icon:{margin:0},title:{fontSize:14,width:"50%"},console:{height:400,backgroundColor:"black",color:"green",overflow:"auto"},consoleLine:{margin:0,paddingTop:0,paddingBottom:0},pos:{marginBottom:23}}),k=function(t){var e=C(),n=t.currentTimes.onTime,a=t.currentTimes.offTime;return Object(m.jsx)(l.a,{variant:"outlined",className:e.root,children:Object(m.jsxs)(b.a,{children:[Object(m.jsx)(g.a,{children:Object(m.jsx)(x.a,{control:Object(m.jsx)(S.a,{size:"small",checked:!t.schedulerState,onChange:t.switch}),label:t.schedulerState?"Turn Scheduler Off":"Turn Scheduler On"})}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.sendState({topic:"setOnOffTimes",params:{onTime:n,offTime:a}})},children:[Object(m.jsxs)(p.a,{children:[Object(m.jsx)(v.a,{htmlFor:"on",children:t.currentTimes.onTime}),Object(m.jsx)(w.a,{id:"on","aria-describedby":"on-text",onChange:function(t){return n=t.target.value}}),Object(m.jsx)(N.a,{id:"on-text",children:"Change show on time."})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(v.a,{htmlFor:"off",children:t.currentTimes.offTime}),Object(m.jsx)(w.a,{id:"off","aria-describedby":"off-text",onChange:function(t){return a=t.target.value}}),Object(m.jsx)(N.a,{id:"off-text",children:"Change show off time."})]}),Object(m.jsx)("br",{}),Object(m.jsx)(d.a,{className:e.buttons,variant:"contained",type:"submit",children:"Submit"})]})]})})},F=n(130),T=n(131),y=n(59),A=n.n(y),L=Object(j.a)({root:{minWidth:325,margin:10,textAlign:"center"},header:{width:"100%",marginBottom:20},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.0)"},buttons:{margin:10},icon:{margin:0},title:{fontSize:14,width:"50%"},console:{height:400,backgroundColor:"black",color:"green",overflow:"auto"},deviceIcon:{marginLeft:10},consoleLine:{margin:0,paddingTop:0,paddingBottom:0},pos:{marginBottom:23}}),B=function(t){var e=L(),n=t.deviceStatuses.map((function(t,n){var a=t.status?"green":"red";return Object(m.jsxs)(F.a,{children:[t.name,Object(m.jsx)(A.a,{className:e.deviceIcon,style:{color:a}})]})}));return Object(m.jsx)(l.a,{variant:"outlined",className:e.root,children:Object(m.jsx)(b.a,{children:Object(m.jsx)(T.a,{children:n})})})},P=(n(81),function(t){var e=O[t.user]||[];return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(h,{user:t.user,sendState:t.sendState}),e.includes("admin")?Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(k,{currentTimes:t.currentTimes,sendState:t.sendState,switch:t.schedulerSwitch,schedulerState:t.schedulerState}),Object(m.jsx)(B,{deviceStatuses:t.deviceStatuses})]}):Object(m.jsx)("div",{})]})}),E=n(132),J=n(60),I=n.n(J),R=new WebSocket("ws://172.16.1.72:3001"),W=function(t){console.log("adding ".concat(t," to statuses."))},z=function(t){console.log("adding ".concat(t," to statuses."))},D=function(t,e){console.log("Setting status for ".concat(t," to ").concat(e))},G=function(){console.log("updater called.")};R.addEventListener("open",(function(t){console.log("connected")})),R.addEventListener("message",(function(t){var e=JSON.parse(t.data);switch(e.topic){case"cuePublisher":z(e.data);break;case"cueSubscriber":W(e.data);break;case"deviceStatus":D(e.data.name,e.data.status);break;case"update":G(!1);break;default:console.log(e)}}));var M=function(t){R.send(JSON.stringify(t))},U=function(){console.log("restart"),R.send(JSON.stringify({topic:"cuePublisher",message:"restart"}))},q=Object(j.a)({root:{flexGrow:1},drawer:{width:240},content:{marginLeft:240}});var H=function(){q();var t=Object(a.useState)([]),e=Object(i.a)(t,2),n=e[0],c=e[1],o=Object(a.useState)([]),r=Object(i.a)(o,2),u=r[0],d=r[1],l=Object(a.useState)([]),b=Object(i.a)(l,2),j=b[0],O=b[1],f=Object(a.useState)(!0),h=Object(i.a)(f,2),g=h[0],x=h[1],S=Object(a.useState)(""),p=Object(i.a)(S,2),v=p[0],w=p[1],N=Object(a.useState)({onTime:"00:00",offTime:"00:00"}),C=Object(i.a)(N,2),k=C[0],F=C[1],T=Object(a.useState)({clip:"",title:"",description:""}),y=Object(i.a)(T,2),A=y[0],L=y[1],B=Object(a.useState)({}),J=Object(i.a)(B,2),R=J[0],H=J[1];W=function(t){c((function(e){return[].concat(Object(s.a)(e),[t])}))},z=function(t){d((function(e){return[].concat(Object(s.a)(e),[t])}))},D=function(t,e){console.log("Status update - ".concat(t,", ").concat(e));var n=Object(s.a)(j),a=!1;n.forEach((function(n){n.name===t&&(n.status=e,a=!0)})),a||n.push({name:t,status:e}),O((function(t){return Object(s.a)(n)}))},function(t){L((function(e){return t}))},function(t){H((function(e){return t}))};var K=function(t){I.a.get("/api/everything").then((function(t){console.log(t.data),F((function(e){return t.data.times})),x(t.data.schedulerState),t.data.deviceStatuses.forEach((function(t){D(t.name,t.status)})),w(t.data.user)}))};Object(a.useState)((function(){K()}),[]);var Q=window.location.search;return new URLSearchParams(Q),G=K,Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(E.a,{}),Object(m.jsx)(P,{sendState:M,currentTimes:k,cueSubscriberStatus:n,cuePublisherStatus:u,cueSubscriberClear:function(){c((function(t){return[]}))},cuePublisherRestart:U,cuePublisherClear:function(){d((function(t){return[]}))},schedulerSwitch:function(){x(!g),console.log(g),M({topic:"showSchedulerState",message:g})},schedulerState:g,deviceStatuses:j,currentCue:A,nextCue:R,user:v})]})},K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),o(t),r(t)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(H,{})}),document.getElementById("root")),K()},69:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},81:function(t,e,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.7c73e07f.chunk.js.map